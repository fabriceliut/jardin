<!DOCTYPE html>
<html lang="fr">
  <head>
  <meta charset="UTF-8">
  <script>(function(){var t=localStorage.getItem('theme');if(t==='dark'||t==='light')document.documentElement.setAttribute('data-theme',t);})()</script>

  <link rel="canonical" href="https://jardin.liut.me/pr%C3%A9sentation-g%C3%A9n%C3%A9rale-du-design-syst%C3%A9mique" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta name="description" content="jâ€™ai eu la chance de produire cette prÃ©sentation dans lâ€™ouvrage â€œpasser au design thinking Ã©dition 2â€ dont je vous propose le contenu ici.">

  <meta property="og:site_name" content="Jardin Liut.">

  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸŒ±</text></svg>">

  <!-- Fonts: Plus Jakarta Sans -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Stylesheet -->
  <link rel="stylesheet" href="/styles.css">

  <script>
    // Progressive enhancement: lazy-load images for better perf
    (function(){
      try{
        window.addEventListener('DOMContentLoaded', function(){
          document.querySelectorAll('img:not([loading])').forEach(function(img){ img.loading = 'lazy'; });
        });
      }catch(e){}
    })();
  </script>

  
  <meta property="og:description" content="jâ€™ai eu la chance de produire cette prÃ©sentation dans lâ€™ouvrage â€œpasser au design thinking Ã©dition 2â€ dont je vous propose le contenu ici."/>
  

  
  <meta property="og:title" content="prÃ©sentation gÃ©nÃ©rale du design systÃ©mique">
  <meta property="og:type" content="article">
  

  
  <meta property="article:published_time" content="2026-02-26T09:00:32+00:00">
  <meta property="article:author" content="https://jardin.liut.me/">
  

  <meta property="og:url" content="https://jardin.liut.me/pr%C3%A9sentation-g%C3%A9n%C3%A9rale-du-design-syst%C3%A9mique" />

  
  <meta property="og:image" content="https://jardin.liut.me/assets/avatar_24.jpg">
  

  <!-- Twitter Cards -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="prÃ©sentation gÃ©nÃ©rale du design systÃ©mique">
  <meta name="twitter:description" content="jâ€™ai eu la chance de produire cette prÃ©sentation dans lâ€™ouvrage â€œpasser au design thinking Ã©dition 2â€ dont je vous propose le contenu ici.">
  <meta name="twitter:image" content="https://jardin.liut.me/assets/avatar_24.jpg">

  <!-- JSON-LD Structured Data -->
  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "prÃ©sentation gÃ©nÃ©rale du design systÃ©mique",
    "url": "https://jardin.liut.me/pr%C3%A9sentation-g%C3%A9n%C3%A9rale-du-design-syst%C3%A9mique",
    "author": {
      "@type": "Person",
      "name": "Fabrice Liut",
      "url": "https://jardin.liut.me/about"
    },
    "dateModified": "2026-02-26T08:59:52+00:00",
    "publisher": {
      "@type": "Person",
      "name": "Fabrice Liut"
    },
    "description": "jâ€™ai eu la chance de produire cette prÃ©sentation dans lâ€™ouvrage â€œpasser au design thinking Ã©dition 2â€ dont je vous propose le contenu ici."
  }
  </script>
  

  <!-- RSS Feed -->
  <link rel="alternate" type="application/atom+xml" title="Jardin Liut." href="/feed.xml">

  <title>
    
      prÃ©sentation gÃ©nÃ©rale du design systÃ©mique &mdash; Jardin Liut.
    
  </title>
</head>

  <body>
    <a class="skip-link" href="#main">Aller au contenu</a>
    <nav><div class="nav-inner wrapper" role="navigation" aria-label="Navigation principale">
    <div class="site-brand">
        <a href="/" aria-label="Accueil">
            <img class="site-logo" src="/assets/miniavatar.jpeg" alt="" width="32" height="32">
            <strong>Jardin Liut.</strong>
        </a>
    </div>
    <div class="nav-right">
        <div class="nav-links">
            <a href="/search" aria-label="Rechercher">ğŸ”</a>
            <a href="/graph">Graph</a>
        </div>
        <button class="theme-toggle" id="theme-toggle" aria-label="Changer le thÃ¨me" title="Changer le thÃ¨me">
            <span class="theme-toggle-icon" id="theme-icon">ğŸŒ™</span>
        </button>
        <div class="site-links">
            <a href="/about">Ã€ propos</a>
        </div>
    </div>
</div>
</nav>
    <div class="wrapper">
      <main id="main">



<article>
  <header>
    <h1>prÃ©sentation gÃ©nÃ©rale du design systÃ©mique</h1>
    
    <div class="note-meta">
      
      
      <time class="note-updated" datetime="2026-02-26T08:59:52+00:00">
        Mis Ã  jour le 26 fÃ©vrier 2026
      </time>
      <span class="reading-time">7 min de lecture</span>
    </div>
    
  </header>

  <div id="notes-entry-container">
    <div class="note-content">
      <div id="toc-container"></div>
      <p><em>jâ€™ai eu la chance de produire cette prÃ©sentation dans lâ€™ouvrage â€œ<a href="https://www.amazon.fr/Passez-design-thinking-%C3%A9dition-construire/dp/2416006789/ref=sr_1_1?keywords=passer+au+design+thinking&amp;qid=1688300722&amp;sr=8-1" target="_blank">passer au design thinking Ã©dition 2</a>â€ dont je vous propose le contenu ici.</em></p>

<h2 id="intro">intro</h2>

<p>Lâ€™approche du <a class="internal-link" href="/design-syst%C3%A9mique">design systÃ©mique</a> est une maniÃ¨re de voir le monde: tout est systÃ¨me. Un objet, un produit, un service, une organisation, notre planÃ¨teâ€¦Il est alors possible dâ€™utiliser les outils et mÃ©thodes venant des diffÃ©rentes sciences des systÃ¨mes complexes pour nos dÃ©marches designs lorsquâ€™on souhaite adresser des problÃ©matiques complexes.</p>

<h2 id="why">Why</h2>

<p>Les maniÃ¨res de concevoir sont souvent trop linÃ©aires et rÃ©ductives. Par exemple, dans la conception de vÃ©hicules: de lâ€™extraction des matÃ©riaux Ã  lâ€™assemblage dans des chaÃ®nes de production avec en sortie un produit vendu dont le fabricant nâ€™est plus directement responsable.</p>

<p>Cette production linÃ©aire entraÃ®ne son lot dâ€™externalitÃ©s nÃ©gatives: pollution, dÃ©chets, rÃ©percussions socio-Ã©conomiques et culturelles, etcâ€¦</p>

<p>Ã‰tudier et visualiser toutes choses comme un systÃ¨me permet de porter un regard plus conscient pour des dÃ©cisions plus Ã©clairÃ©es. Cette approche permet un travail en cohÃ©rence avec les besoins humains rÃ©els et de respecter au mieux les systÃ¨mes alentour.</p>

<h2 id="how">How</h2>

<p>Lâ€™initiation dâ€™une approche systÃ©mique se fait par la comprÃ©hension du contexte du systÃ¨me. Câ€™est lui qui va conditionner et orienter le choix des outils et mÃ©thodes les plus adaptÃ©s.</p>

<p>Par exemple, la mise en place dâ€™un nouveau service: la maniÃ¨re de concevoir ce systÃ¨me sera totalement diffÃ©rente suivant le contexte Ã©conomique, culturel, gÃ©ographique, politiqueâ€¦</p>

<p>Avec le contexte bien posÃ©, le designer va ensuite accompagner le groupe de travail dans la modÃ©lisation de ce systÃ¨me et ainsi pouvoir le visualiser: câ€™est ce quâ€™on appelle le â€œmapping systÃ©miqueâ€. Cette â€œmapâ€ sera utile uniquement dans le cadre de lâ€™Ã©tude en cours. Câ€™est un point essentiel lorsquâ€™on approche la complexitÃ©: rien nâ€™est figÃ©, rien nâ€™est exact; tout ce quâ€™on crÃ©e est support de travail â€œsuffisantâ€ pour guider les choix et faciliter les dÃ©cisions, mais ne permet pas dâ€™attendre la certitude.</p>

<p>Cela dit, il vaut mieux accepter la complexitÃ© et agir en consÃ©quence plutÃ´t que la fuir et agir comme si tout Ã©tait â€œsimple et sous contrÃ´leâ€, ce qui risquerait dâ€™entraÃ®ner de nouvelles chaÃ®nes de problÃ¨mes inattendusâ€¦</p>

<p>Il conviendrait alors de remplacer la dÃ©marche â€œproblÃ¨me &gt; solutionâ€ par â€œchallenge &gt; stratÃ©gies dâ€™interventionsâ€.</p>

<h2 id="what">What</h2>

<p>Le design systÃ©mique est adaptÃ© Ã  des sujets complexes et pour lesquels les outils et mÃ©thodes plus classiques du design thinking seraient trop limitants.</p>

<p>Quelques exemples:</p>

<ul>
  <li>
    <p>Automobile: ne plus vendre de vÃ©hicules directement mais plutÃ´t dÃ©velopper un service de mobilitÃ© qui va nÃ©cessiter une co-conception multi partie-prenantes.</p>
  </li>
  <li>
    <p>BÃ¢timent: construire essentiellement avec des matÃ©riaux de rÃ©emploi et gÃ©nÃ©rer un minimum de nouveaux dÃ©chets.</p>
  </li>
  <li>
    <p>Loisir sportif: faire Ã©voluer un modÃ¨le de vente de produits linÃ©aire vers un modÃ¨le circulaire avec des propositions de services par abonnements.</p>
  </li>
</ul>

<h1 id="atelier-design-systÃ©mique---dÃ©roulÃ©-type">Atelier Design SystÃ©mique - dÃ©roulÃ© type</h1>

<p>Pour modÃ©liser et visualiser le systÃ¨me dâ€™une entreprise et faciliter la prise de dÃ©cisions en conscience et en seulement 3 jours.</p>

<h2 id="jour-0--prÃ©paration">Jour 0 â€“ PrÃ©paration.</h2>

<p>JournÃ©e nÃ©cessaire pour prÃ©parer les 3 jours: co-Ã©criture des questions et objectifs de lâ€™atelier, sÃ©lection et booking des participants, agendas, logistiqueâ€¦</p>

<p>PrÃ©fÃ©rer une salle de crÃ©ativitÃ© spacieuse et recouverte de tableaux blancs: lâ€™espace va devenir au fil des travaux â€œla carte du systÃ¨meâ€ grandeur nature.</p>

<h2 id="jour-1--mapping-par-les-diffÃ©rentes-parties-prenantes">Jour 1 â€“ Mapping par les diffÃ©rentes parties-prenantes.</h2>

<p>PremiÃ¨re phase de mise Ã  plat visuelle systÃ©mique de toute lâ€™organisation par les diffÃ©rents points de vues crÃ©ant ainsi une fresque systÃ©mique collective.</p>

<p>Chaque partie-prenante modÃ©lise son service &amp; son fonctionnement avec lâ€™aide du facilitateur. Il crÃ©e les liens, relations, processus, projets, personnes, fonctionnements spÃ©cifiques, dÃ©pendances avec les autres services ou des partenaires externes.</p>

<h2 id="jour-2--analyse-systÃ©mique--diagnostique">Jour 2 â€“ Analyse systÃ©mique &amp; diagnostique.</h2>

<p>Ces mÃªme partie-prenantes (ou de nouveaux participants pour chaque service) prÃ©sentent leurs systÃ¨mes et analysent ensemble les diffÃ©rents points de frictions et de fluiditÃ©s tout en complÃ©tant et restructurant les systÃ¨mes si nÃ©cessaire.</p>

<p>Durant cette journÃ©e peuvent intervenir diffÃ©rents experts externes qui vont apporter des points de vues complÃ©mentaires : anthropologue, Ã©conomiste, entrepreneur, scientifique, spÃ©cialiste rÃ©seaux, coachs, etcâ€¦</p>

<h2 id="jour-3--priorisations--axes-de-transformation">Jour 3 â€“ Priorisations &amp; axes de transformation.</h2>

<p>En partant du systÃ¨me complet et du diagnostic de la veille, les diffÃ©rentes parties-prenantes ainsi que les membres de la direction priorisent des Â« nÅ“uds de problÃ©matiques Â» qui deviennent les Â« points de dÃ©part de chantiers de transformations Â» Ã  mettre en place.</p>

<p>Ainsi, toutes les parties-prenantes prennent conscience des urgences rÃ©elles et des dÃ©marches Ã  mettre en place, par prioritÃ©s, pour faire Ã©voluer leur systÃ¨me commun. Ils peuvent ainsi plus facilement agir en coopÃ©ration, en commenÃ§ant par activer des premiÃ¨res actions locales, simples, concrÃ¨tes et pragmatiques, avec une juste distribution des actions dans un rythme collectif.</p>

<h2 id="commentaires">Commentaires</h2>

<p>Il est possible de rÃ©aliser cet atelier 100% Ã  distance en travaillant dans un espace collaboratif numÃ©rique comme Miro. Cela dit, il est recommandÃ© de le faire en physique pour faciliter lâ€™immersion, la â€œpromenadeâ€ dans le systÃ¨me qui va faciliter son appropriation par toutes les parties-prenantes.</p>

<p>Cet atelier est le premier pas pour prendre conscience du fonctionnement du systÃ¨me Ã  un instant T et aider les dirigeants et autres partie-prenantes Ã  prendre des dÃ©cisions plus lucides et prioriser pour Ãªtre tout simplement plus efficients au quotidien.</p>

<h1 id="interview">interview</h1>

<h2 id="qui-es-tu-en-quelques-mots-">Qui es-tu en quelques mots ?</h2>

<p>Fabrice Liut, designer, facilitateur et systems thinker. jâ€™accompagne les organisations et les institutions dans les Ã©tapes importantes de leurs Ã©volutions en apportant des outils, mÃ©thodes et modÃ¨les facilitant les coopÃ©rations nÃ©cessaire pour adresser des enjeux complexes.</p>

<h2 id="limpact-que-tu-aurais-dans-ton-rÃªve-le-plus-fou-">Lâ€™impact que tu aurais dans ton rÃªve le plus fou ?</h2>

<p>Pour moi, le Design SystÃ©mique permet de prendre en compte la profondeur et la largeur des enjeux sociaux, Ã©cologiques et Ã©conomiques actuels et dâ€™agir bien plus en conscience et efficacement quâ€™autrement.</p>

<p>Alors mon rÃªve serait de participer Ã  un mouvement â€œrÃ©gÃ©nÃ©ratifâ€ qui viendrait transformer notre sociÃ©tÃ© pour une nouvelle version plus Ã©quilibrÃ©e, belle et en lien avec le vivant.</p>

<h2 id="quest-ce-qui-tinspire-autant-dans-cette-approche-">Quâ€™est-ce qui tâ€™inspire autant dans cette approche ?</h2>

<p>Une citation pour illustrer: â€œla vie ce nâ€™est pas les molÃ©cules mais les liens entre les molÃ©cules.â€</p>

<p>Avec un regard portÃ© sur le monde en systÃ¨mes, nous pouvons comprendre, sentir et vivre profondÃ©ment que tout est liÃ©, que tout est en interactions et quâ€™il est illusoire voir dangereux de continuer dâ€™agir comme si tout Ã©tait sÃ©parÃ© et isolÃ©â€¦</p>

<p>Câ€™est une approche qui rend plus humble et qui ouvre lâ€™attention sur la qualitÃ© et la responsabilitÃ© de chacun de nos gestes et de nos choix.</p>

<h2 id="quelles-sont-les-diffÃ©rences-avec-le-design-thinking-">Quelles sont les diffÃ©rences avec le Design Thinking ?</h2>

<p>Ce sont deux approches complÃ©mentaires qui viennent sâ€™enrichir lâ€™une lâ€™autre et qui â€œen comboâ€ viennent ouvrir plus large le champ des possible.</p>

<p>Si au dÃ©part la question est complexe, il sera adaptÃ© dâ€™activer lâ€™approche systÃ©mique pour une phase dâ€™observation, de recherche, de modÃ©lisation du systÃ¨me, dâ€™analyse et de priorisation des actions Ã  enclencher. Lorsque tout est posÃ© et bien clair, il est temps de gÃ©nÃ©rer des concepts, de prototyper et de tester: alors le Design Thinking prend le relais.</p>

<p>Selon moi lâ€™important est de faire face Ã  la complexitÃ© sans pour autant â€œsur-complexifierâ€.</p>

<h2 id="tu-peux-nous-raconter-un-cas-oÃ¹-cet-atelier-a-eu-un-impact-important-">Tu peux nous raconter un cas oÃ¹ cet atelier a eu un impact important ?</h2>

<p>2 communes fusionnent pour devenir une commune nouvelle. Gros Ã©cart de culture et de fonctionnement entre les 2 et beaucoup de rÃ©sistances Ã  ne faire quâ€™une. Une comprÃ©hension et une lecture trÃ¨s floue entre le rÃ´le des agents et celui des Ã©lus.</p>

<p>Suite Ã  plusieurs ateliers mÃªlant agents et Ã©lus - faisant travailler tout le monde ensemble pour la premiÃ¨re fois autour dâ€™un systÃ¨me commun - ils crÃ©ent cet objet permettant de visualiser les services rendus Ã  la commune dâ€™un cÃ´tÃ© et les politiques publiques de lâ€™autre ainsi que les liens dâ€™influences entre les deux.</p>

<p>GrÃ¢ce Ã  ce â€œsystÃ¨meâ€ ils disposent maintenant dâ€™un outil visuel et Ã©volutif pour lire le fonctionnement de la commune. Les rÃ´les et les responsabilitÃ©s sont clairement dÃ©finis ce qui fluidifie leur organisation et lâ€™unification.</p>

<p>Nous avons eu la belle opportunitÃ© dâ€™adresser un besoin Ã  la fois organisationnel, culturel, social et territorialâ€¦ câ€™est passionnant et trÃ¨s enrichissant comme cas dâ€™Ã©tude!</p>

<h2 id="quels-seraient-les-conseils-que-tu-donnerais-Ã -quelquun-qui-se-lance-dans-un-atelier-de-design-systÃ©mique-">Quels seraient les conseils que tu donnerais Ã  quelquâ€™un qui se lance dans un atelier de Design SystÃ©mique ?</h2>

<ul>
  <li>
    <p>Inviter les bonnes personnes pour cerner toutes les dimensions du systÃ¨me Ã  Ã©tudier.</p>
  </li>
  <li>
    <p>Commencer par bien dÃ©finir et comprendre le contexte du systÃ¨me avant de travailler sur le systÃ¨me lui-mÃªme.</p>
  </li>
  <li>
    <p>Ne pas chercher Ã  obtenir une modÃ©lisation parfaite du systÃ¨me, de toute maniÃ¨re il va Ã©voluer rapidement.</p>
  </li>
  <li>
    <p>Sâ€™entraÃ®ner Ã  modÃ©liser des systÃ¨mes simplement: prendre une feuille A0, des feutres et câ€™est parti! Votre cerveau fera des liens de plus en plus facilement et va sâ€™ouvrir Ã  plus de complexitÃ©.</p>
  </li>
</ul>

<h2 id="un-mot-pour-la-fin-">Un mot pour la fin ?</h2>

<p>Les sujets de la complexitÃ© et de la systÃ©mique sont des sujets scientifiques rigoureux qui demandent une grande humilitÃ© et un grand respect - Ã  grand pouvoir grande responsabilitÃ©!</p>

<p>Ainsi, ce que je produis et partage sur le sujet nâ€™a pas la prÃ©tention dâ€™Ãªtre des objets scientifiques; je reste avant tout un designer qui explore et dÃ©couvre par la pratique et partage Ã  dâ€™autres ce qui fonctionne de mes expÃ©riences.</p>

<p>Câ€™est Ã  vous de faire vos propres expÃ©riences et de rencontrer beaucoup dâ€™acteurs du sujet - vous pourrez ainsi construire votre approche singuliÃ¨re et apporter la richesse de votre diversitÃ© au monde!</p>

      <p class="note-cta">Merci de votre lecture â€” vous pouvez me contacter sur <a href="https://liut.me">liut.me</a></p>
    </div>

    <aside class="note-sidebar">
      <h3 class="sidebar-title">Notes en lien</h3>
      
      <p class="backlink-empty">
        Aucune note ne fait rÃ©fÃ©rence Ã  celle-ci pour le moment.
      </p>
      
    </aside>
  </div>
</article>

<script>
// Auto-generate TOC for notes with 3+ headings
(function() {
  var content = document.querySelector('.note-content');
  var tocContainer = document.getElementById('toc-container');
  if (!content || !tocContainer) return;
  
  var headings = content.querySelectorAll('h2, h3');
  if (headings.length < 3) return;
  
  var details = document.createElement('details');
  details.className = 'toc';
  var summary = document.createElement('summary');
  summary.className = 'toc-title';
  summary.textContent = 'Sommaire';
  details.appendChild(summary);
  var ul = document.createElement('ul');
  
  headings.forEach(function(h, i) {
    if (!h.id) h.id = 'heading-' + i;
    var li = document.createElement('li');
    if (h.tagName === 'H3') li.className = 'toc-h3';
    var a = document.createElement('a');
    a.setAttribute('href', '#' + h.id);
    a.textContent = h.textContent;
    a.addEventListener('click', function(e) {
      e.preventDefault();
      var target = document.getElementById(h.id);
      if (target) {
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        history.replaceState(null, '', '#' + h.id);
      }
    });
    li.appendChild(a);
    ul.appendChild(li);
  });
  
  details.appendChild(ul);
  tocContainer.appendChild(details);
})();
</script>
</main>
      <footer class="site-footer">
	<nav class="footer-nav" aria-label="Navigation de pied de page">
		<a href="/">Accueil</a>
		<a href="/search">Rechercher</a>
		<a href="/about">Ã€ propos</a>
		<a href="/graph">Graph</a>
		<a href="/feed.xml" aria-label="Flux RSS">RSS</a>
	</nav>
	<p>Ce <a href="/about">jardin numÃ©rique</a> est un espace vivant, en constante Ã©volution.</p>
	<p>Â© 2026 Jardin Liut.</p>
</footer>

    </div>

    <div class="tooltip-wrapper" id="tooltip-wrapper">
  <div id="tooltip-content"></div>
</div>

<script>
(function() {
  var opacityTimeout, contentTimeout;
  var transitionDurationMs = 100;
  var tooltipWrapper = document.getElementById('tooltip-wrapper');
  var tooltipContent = document.getElementById('tooltip-content');
  var cache = {};

  function hideTooltip() {
    opacityTimeout = setTimeout(function() {
      tooltipWrapper.style.opacity = 0;
      contentTimeout = setTimeout(function() {
        tooltipContent.innerHTML = '';
        tooltipWrapper.style.display = 'none';
      }, transitionDurationMs + 1);
    }, transitionDurationMs);
  }

  function showTooltip(event) {
    var elem = event.target;
    var rects = elem.getClientRects();
    var elemProps = rects[rects.length - 1];
    var scrollTop = window.pageYOffset || document.documentElement.scrollTop;

    if (elem.host !== window.location.host) return;

    function renderTooltip(html) {
      tooltipContent.innerHTML = html;
      tooltipWrapper.style.display = 'block';
      setTimeout(function() { tooltipWrapper.style.opacity = 1; }, 1);

      tooltipWrapper.style.left = (elemProps.left - (tooltipWrapper.offsetWidth / 2) + (elemProps.width / 2)) + 'px';
      if ((window.innerHeight - elemProps.top) < tooltipWrapper.offsetHeight) {
        tooltipWrapper.style.top = (elemProps.top + scrollTop - tooltipWrapper.offsetHeight - 10) + 'px';
      } else {
        tooltipWrapper.style.top = (elemProps.top + scrollTop + 35) + 'px';
      }
      if ((elemProps.left + elemProps.width / 2) < (tooltipWrapper.offsetWidth / 2)) {
        tooltipWrapper.style.left = '10px';
      } else if ((document.body.clientWidth - elemProps.left - elemProps.width / 2) < (tooltipWrapper.offsetWidth / 2)) {
        tooltipWrapper.style.left = (document.body.clientWidth - tooltipWrapper.offsetWidth - 20) + 'px';
      }
    }

    if (cache[elem.href]) {
      renderTooltip(cache[elem.href]);
      return;
    }

    fetch(elem.href)
      .then(function(r) { return r.text(); })
      .then(function(html) {
        var parser = new DOMParser();
        var doc = parser.parseFromString(html, 'text/html');
        var h1 = doc.querySelector('h1');
        var content = doc.querySelector('.note-content');
        if (!h1 || !content) return;
        var preview = '<div class="tooltip-title">' + h1.textContent + '</div>' + content.innerHTML;
        cache[elem.href] = preview;
        renderTooltip(preview);
      })
      .catch(function() {});
  }

  function setupListeners(link) {
    link.addEventListener('mouseleave', hideTooltip);
    link.addEventListener('touchend', hideTooltip);
    link.addEventListener('mouseenter', function(e) {
      clearTimeout(opacityTimeout);
      clearTimeout(contentTimeout);
      showTooltip(e);
    });
  }

  tooltipWrapper.addEventListener('mouseleave', hideTooltip);
  tooltipWrapper.addEventListener('touchend', hideTooltip);
  tooltipWrapper.addEventListener('mouseenter', function() {
    clearTimeout(opacityTimeout);
    clearTimeout(contentTimeout);
  });

  document.querySelectorAll('.note-content a').forEach(function(link) {
    // Skip same-page anchor links (e.g. TOC links)
    if (link.getAttribute('href') && link.getAttribute('href').charAt(0) === '#') return;
    // Skip links inside the TOC
    if (link.closest('.toc')) return;
    setupListeners(link);
  });
})();
</script>


    <script>
    // Theme toggle: cycles auto â†’ dark â†’ light â†’ auto
    (function() {
      var root = document.documentElement;
      var btn = document.getElementById('theme-toggle');
      var icon = document.getElementById('theme-icon');
      if (!btn || !icon) return;

      var saved = localStorage.getItem('theme');
      if (saved === 'dark' || saved === 'light') {
        root.setAttribute('data-theme', saved);
      }
      updateIcon();

      btn.addEventListener('click', function() {
        var current = root.getAttribute('data-theme');
        if (!current) {
          // Was auto (OS) â†’ force dark
          root.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
        } else if (current === 'dark') {
          root.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
        } else {
          // Was light â†’ back to auto
          root.removeAttribute('data-theme');
          localStorage.removeItem('theme');
        }
        updateIcon();
      });

      function updateIcon() {
        var theme = root.getAttribute('data-theme');
        if (theme === 'dark') {
          icon.textContent = 'â˜€ï¸';
        } else if (theme === 'light') {
          icon.textContent = 'ğŸŒ™';
        } else {
          // Auto â€” show based on OS
          icon.textContent = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'â˜€ï¸' : 'ğŸŒ™';
        }
      }
    })();
    </script>
  </body>
</html>
