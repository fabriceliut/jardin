<!DOCTYPE html>
<html lang="fr">
  <head>
  <meta charset="UTF-8">
  <script>(function(){var t=localStorage.getItem('theme');if(t==='dark'||t==='light')document.documentElement.setAttribute('data-theme',t);})()</script>

  <link rel="canonical" href="https://jardin.liut.me/syst%C3%A8me-complexe" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta name="description" content="Comprendre la complexit√© pour mieux piloter votre entreprise.">

  <meta property="og:site_name" content="Jardin Liut.">

  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üå±</text></svg>">

  <!-- Fonts: Plus Jakarta Sans -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Stylesheet -->
  <link rel="stylesheet" href="/styles.css">

  <script>
    // Progressive enhancement: lazy-load images for better perf
    (function(){
      try{
        window.addEventListener('DOMContentLoaded', function(){
          document.querySelectorAll('img:not([loading])').forEach(function(img){ img.loading = 'lazy'; });
        });
      }catch(e){}
    })();
  </script>

  
  <meta property="og:description" content="Comprendre la complexit√© pour mieux piloter votre entreprise."/>
  

  
  <meta property="og:title" content="syst√®me complexe">
  <meta property="og:type" content="article">
  

  
  <meta property="article:published_time" content="2026-02-18T13:44:32+00:00">
  <meta property="article:author" content="https://jardin.liut.me/">
  

  <meta property="og:url" content="https://jardin.liut.me/syst%C3%A8me-complexe" />

  
  <meta property="og:image" content="https://jardin.liut.me/assets/avatar_24.jpg">
  

  <!-- Twitter Cards -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="syst√®me complexe">
  <meta name="twitter:description" content="Comprendre la complexit√© pour mieux piloter votre entreprise.">
  <meta name="twitter:image" content="https://jardin.liut.me/assets/avatar_24.jpg">

  <!-- JSON-LD Structured Data -->
  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "syst√®me complexe",
    "url": "https://jardin.liut.me/syst%C3%A8me-complexe",
    "author": {
      "@type": "Person",
      "name": "Fabrice Liut",
      "url": "https://jardin.liut.me/about"
    },
    "dateModified": "2026-02-18T13:43:55+00:00",
    "publisher": {
      "@type": "Person",
      "name": "Fabrice Liut"
    },
    "description": "Comprendre la complexit√© pour mieux piloter votre entreprise."
  }
  </script>
  

  <!-- RSS Feed -->
  <link rel="alternate" type="application/atom+xml" title="Jardin Liut." href="/feed.xml">

  <title>
    
      syst√®me complexe &mdash; Jardin Liut.
    
  </title>
</head>

  <body>
    <a class="skip-link" href="#main">Aller au contenu</a>
    <nav><div class="nav-inner wrapper" role="navigation" aria-label="Navigation principale">
    <div class="site-brand">
        <a href="/" aria-label="Accueil">
            <img class="site-logo" src="/assets/miniavatar.jpeg" alt="" width="32" height="32">
            <strong>Jardin Liut.</strong>
        </a>
    </div>
    <div class="nav-right">
        <div class="nav-links">
            <a href="/search" aria-label="Rechercher">üîç</a>
            <a href="/graph">Graph</a>
        </div>
        <button class="theme-toggle" id="theme-toggle" aria-label="Changer le th√®me" title="Changer le th√®me">
            <span class="theme-toggle-icon" id="theme-icon">üåô</span>
        </button>
        <div class="site-links">
            <a href="/about">√Ä propos</a>
        </div>
    </div>
</div>
</nav>
    <div class="wrapper">
      <main id="main">



<article>
  <header>
    <h1>syst√®me complexe</h1>
    
    <div class="note-meta">
      
      
      <time class="note-updated" datetime="2026-02-18T13:43:55+00:00">
        Mis √† jour le 18 f√©vrier 2026
      </time>
      <span class="reading-time">4 min de lecture</span>
    </div>
    
  </header>

  <div id="notes-entry-container">
    <div class="note-content">
      <div id="toc-container"></div>
      <h2 id="comprendre-la-complexit√©-pour-mieux-piloter-votre-entreprise">Comprendre la complexit√© pour mieux piloter votre entreprise.</h2>

<p>Votre entreprise n‚Äôest pas une machine. C‚Äôest un syst√®me vivant, avec des interactions, des boucles de feedback et des √©mergences impr√©visibles.</p>

<h2 id="cest-quoi-un-syst√®me-complexe-">C‚Äôest quoi un syst√®me complexe ?</h2>

<p><strong>Simple :</strong> 2 √©l√©ments + 1 lien = 1 syst√®me</p>

<p><strong>Compliqu√© :</strong> Beaucoup d‚Äô√©l√©ments + liens pr√©visibles = une recette de cuisine</p>

<p><strong>Complexe :</strong> √âl√©ments interconnect√©s + interactions impr√©visibles = votre entreprise</p>

<p>Dans un syst√®me complexe, changer un petit √©l√©ment peut avoir des effets majeurs ailleurs. Et inversement, des gros changements peuvent n‚Äôavoir aucun impact.</p>

<h2 id="pourquoi-cest-important-pour-votre-entreprise-">Pourquoi c‚Äôest important pour votre entreprise ?</h2>

<p>Parce que la plupart des probl√®mes d‚Äôentreprise viennent de l√† :</p>

<ul>
  <li>
<strong>On traite les sympt√¥mes</strong> ‚Üí Au lieu des causes profondes</li>
  <li>
<strong>On agit en silos</strong> ‚Üí Sans voir les interconnexions</li>
  <li>
<strong>On cherche des coupables</strong> ‚Üí Au lieu de comprendre le syst√®me</li>
  <li>
<strong>On multiplie les solutions</strong> ‚Üí Qui cr√©ent d‚Äôautres probl√®mes</li>
</ul>

<p><strong>R√©sultat :</strong> On s‚Äô√©puise √† √©teindre des feux sans jamais r√©soudre les vrais probl√®mes.</p>

<h2 id="les-caract√©ristiques-dun-syst√®me-complexe">Les caract√©ristiques d‚Äôun syst√®me complexe</h2>

<h3 id="-interconnexions">üîÑ Interconnexions</h3>

<p>Tout est li√©. Un changement dans un service impacte les autres, parfois de fa√ßon inattendue.</p>

<h3 id="-√©mergence">üå± √âmergence</h3>

<p>Le comportement global n‚Äôest pas la somme des comportements individuels. L‚Äô√©quipe peut √™tre plus (ou moins) que la somme de ses membres.</p>

<h3 id="-boucles-de-feedback">üîÅ Boucles de feedback</h3>

<p>Les effets deviennent causes. Une baisse de moral peut cr√©er plus de probl√®mes, qui cr√©ent plus de baisse de moral.</p>

<h3 id="Ô∏è-√©quilibres-dynamiques">‚öñÔ∏è √âquilibres dynamiques</h3>

<p>Le syst√®me cherche constamment son √©quilibre, mais cet √©quilibre bouge en permanence.</p>

<h3 id="-non-lin√©arit√©">üéØ Non-lin√©arit√©</h3>

<p>Petites causes, grands effets. Ou l‚Äôinverse. Il n‚Äôy a pas de proportionnalit√© directe.</p>

<h2 id="comment-g√©rer-la-complexit√©-en-entreprise-">Comment g√©rer la complexit√© en entreprise ?</h2>

<h3 id="1-cartographier-le-syst√®me">1. Cartographier le syst√®me</h3>

<ul>
  <li>Identifier les acteurs cl√©s et leurs relations</li>
  <li>Rep√©rer les flux (information, d√©cisions, ressources)</li>
  <li>Visualiser les boucles de feedback</li>
  <li>D√©tecter les points de blocage et de levier</li>
</ul>

<blockquote>
  <p>Ce qui peut se faire lors d‚Äôun atelier <a class="internal-link" href="/design-syst%C3%A9mique-sur-3-jours">Design syst√©mique sur 3 jours</a>.</p>
</blockquote>

<h3 id="2-chercher-les-causes-racines">2. Chercher les causes racines</h3>

<ul>
  <li>Remonter la cha√Æne des causes</li>
  <li>Identifier les patterns r√©currents</li>
  <li>Distinguer les sympt√¥mes des vraies causes</li>
  <li>Prioriser selon l‚Äôimpact syst√©mique</li>
</ul>

<h3 id="3-agir-sur-les-leviers">3. Agir sur les leviers</h3>

<ul>
  <li>Intervenir sur les points d‚Äôinfluence maximale</li>
  <li>Tester et ajuster en continu</li>
  <li>Mesurer les effets syst√©miques</li>
  <li>Accepter que certains effets soient impr√©visibles</li>
</ul>

<h2 id="exemples-concrets-en-entreprise">Exemples concrets en entreprise</h2>

<h3 id="probl√®me--retards-de-livraison-r√©currents">Probl√®me : Retards de livraison r√©currents</h3>

<p><strong>Approche lin√©aire :</strong> Sanctionner l‚Äô√©quipe logistique</p>

<p><strong>Approche syst√©mique :</strong></p>

<ul>
  <li>Cartographier le processus complet</li>
  <li>Identifier que les retards viennent de commandes mal sp√©cifi√©es</li>
  <li>Remonter √† un probl√®me de communication commercial/technique</li>
  <li>Agir sur la formation et les outils de sp√©cification</li>
</ul>

<p><strong>R√©sultat :</strong> Probl√®me r√©solu durablement vs temporairement</p>

<h3 id="probl√®me--baisse-de-motivation-g√©n√©ralis√©e">Probl√®me : Baisse de motivation g√©n√©ralis√©e</h3>

<p><strong>Approche lin√©aire :</strong> Organiser un team building</p>

<p><strong>Approche syst√©mique :</strong></p>

<ul>
  <li>Analyser les interactions entre √©quipes</li>
  <li>Identifier des conflits de priorit√©s non exprim√©s</li>
  <li>Remonter √† un manque de clart√© strat√©gique</li>
  <li>Agir sur la communication de la vision et l‚Äôalignement</li>
</ul>

<p><strong>R√©sultat :</strong> Motivation retrouv√©e vs effet temporaire</p>

<h2 id="les-outils-du-manager-syst√©mique">Les outils du manager syst√©mique</h2>

<h3 id="Ô∏è-cartographie-des-syst√®mes">üó∫Ô∏è Cartographie des syst√®mes</h3>

<p>Visualiser les acteurs, flux et relations pour comprendre la structure.</p>

<h3 id="-analyse-des-causes-racines">üîç Analyse des causes racines</h3>

<p>Remonter syst√©matiquement la cha√Æne des causes pour √©viter les sympt√¥mes.</p>

<h3 id="-identification-des-leviers">üéØ Identification des leviers</h3>

<p>Rep√©rer les points o√π un petit changement peut avoir un grand impact.</p>

<h3 id="-mesure-des-effets-syst√©miques">üìä Mesure des effets syst√©miques</h3>

<p>Suivre les indicateurs interconnect√©s plut√¥t qu‚Äôisol√©s.</p>

<h3 id="-boucles-dam√©lioration">üîÑ Boucles d‚Äôam√©lioration</h3>

<p>Cr√©er des m√©canismes d‚Äôapprentissage et d‚Äôajustement continus.</p>

<h2 id="quand-utiliser-lapproche-syst√©mique-">Quand utiliser l‚Äôapproche syst√©mique ?</h2>

<ul>
  <li>
<strong>Probl√®mes r√©currents</strong> ‚Üí Qui reviennent malgr√© les solutions</li>
  <li>
<strong>Situations complexes</strong> ‚Üí Avec de nombreux acteurs et interactions</li>
  <li>
<strong>Effets de bord</strong> ‚Üí Quand les solutions cr√©ent d‚Äôautres probl√®mes</li>
  <li>
<strong>R√©sistance au changement</strong> ‚Üí Quand le syst√®me ‚Äúr√©siste‚Äù aux √©volutions</li>
  <li>
<strong>Performance globale</strong> ‚Üí Quand il faut optimiser l‚Äôensemble</li>
</ul>

<h2 id="comment-je-vous-accompagne">Comment je vous accompagne</h2>

<p>En tant que <strong>facilitateur syst√©mique</strong>, je vous aide √† :</p>

<ul>
  <li>
<strong>Cartographier vos syst√®mes</strong> ‚Üí Visualiser ce qui est invisible</li>
  <li>
<strong>Identifier les causes racines</strong> ‚Üí Aller au fond des probl√®mes</li>
  <li>
<strong>Rep√©rer les leviers d‚Äôaction</strong> ‚Üí Maximiser l‚Äôimpact de vos efforts</li>
  <li>
<strong>Concevoir des solutions durables</strong> ‚Üí Qui tiennent dans la dur√©e</li>
  <li>
<strong>Former vos √©quipes</strong> ‚Üí √Ä cette approche syst√©mique</li>
</ul>

<h2 id="les-b√©n√©fices-concrets">Les b√©n√©fices concrets</h2>

<p><strong>Efficacit√© :</strong> R√©soudre les vrais probl√®mes du premier coup</p>

<p><strong>√âconomies :</strong> Arr√™ter de traiter les sympt√¥mes en boucle</p>

<p><strong>S√©r√©nit√© :</strong> Comprendre pourquoi √ßa coince et comment d√©bloquer</p>

<p><strong>Performance :</strong> Optimiser l‚Äôensemble plut√¥t que les parties</p>

<p><strong>R√©silience :</strong> Anticiper et g√©rer les effets de bord</p>

<h2 id="attention-aux-pi√®ges">Attention aux pi√®ges</h2>

<ul>
  <li>
<strong>Paralysie par l‚Äôanalyse</strong> ‚Üí Ne pas rester bloqu√© dans la cartographie</li>
  <li>
<strong>Complexit√© artificielle</strong> ‚Üí Parfois, la solution simple est la bonne</li>
  <li>
<strong>Perfectionnisme syst√©mique</strong> ‚Üí Accepter que tout ne soit pas pr√©visible</li>
</ul>

<p><strong>L‚Äô√©quilibre :</strong> Alterner entre pens√©e syst√©mique et action pragmatique.</p>

<hr>

<p><strong>Envie de d√©m√™ler la complexit√© de votre entreprise ?</strong></p>

<p><a href="https://cal.com/fabrice-liut/45-min-meeting" target="_blank">45 min pour cartographier ensemble</a> ou d√©couvrir <a href="/un-jeu-pour-comprendre-les-syst%C3%A8mes-complexes-et-les-%C3%A9cosyst%C3%A8mes" target="_blank">un jeu pour comprendre les syst√®mes complexes</a></p>

      <p class="note-cta">Merci de votre lecture ‚Äî vous pouvez me contacter sur <a href="https://liut.me">liut.me</a></p>
    </div>

    <aside class="note-sidebar">
      <h3 class="sidebar-title">Notes en lien</h3>
      
      <div>
      
        <div class="backlink-box">
          <a class="internal-link" href="/biomim%C3%A9tisme">biomim√©tisme</a>
          <div class="backlink-excerpt">La [[bio-inspiration]] fait usage de la [[pens√©e analogique]] pour imaginer des solutions √† des [[syst√®me complexe]] venant de syst√®mes parfois...</div>
        </div>
      
        <div class="backlink-box">
          <a class="internal-link" href="/business-as-non-usual-le-guide">Business as non usual, le guide</a>
          <div class="backlink-excerpt">
</div>
        </div>
      
        <div class="backlink-box">
          <a class="internal-link" href="/institut-de-la-pens%C3%A9e-int%C3%A9grale">institut de la pens√©e int√©grale</a>
          <div class="backlink-excerpt">Une nouvelle institution pour penser &amp; penser le monde autrement, pour faire autrement ensemble.
</div>
        </div>
      
        <div class="backlink-box">
          <a class="internal-link" href="/ma-vision-du-design-en-2021">Ma vision du Design en 2021</a>
          <div class="backlink-excerpt">Je me dis actuellement acteur du [[design syst√©mique]] et du [[design r√©g√©n√©ratif]]. Mais qu‚Äôest-ce que veulent dire ces termes associ√©s...</div>
        </div>
      
        <div class="backlink-box">
          <a class="internal-link" href="/pens%C3%A9e-analogique">pens√©e analogique</a>
          <div class="backlink-excerpt">Processus de tisser des liens entre des √©l√©ments venant de domaines totalement diff√©rents et qui n‚Äôont en apparence aucun rapport....</div>
        </div>
      
        <div class="backlink-box">
          <a class="internal-link" href="/pens%C3%A9e-syst%C3%A9mique">pens√©e syst√©mique</a>
          <div class="backlink-excerpt">C‚Äôest un mod√®le de pens√©e factuel au niveau de la [[logique]]. C‚Äôest consid√©rer que tout est [[syst√®me complexe]] et en...</div>
        </div>
      
        <div class="backlink-box">
          <a class="internal-link" href="/prendre-soin-du-monde">Prendre soin du monde</a>
          <div class="backlink-excerpt">Vivre au quotidien s‚Äôexprime pour moi sur 2 dimensions majeures : le monde &amp; moi. Il y a des temps...</div>
        </div>
      
        <div class="backlink-box">
          <a class="internal-link" href="/spirale-dynamique">spirale dynamique</a>
          <div class="backlink-excerpt">Base wiki en attendant de d√©velopper.
</div>
        </div>
      
        <div class="backlink-box">
          <a class="internal-link" href="/transformation-culturelle-d-un-grand-groupe-europ%C3%A9en">Transformation culturelle d‚Äôun grand groupe europ√©en</a>
          <div class="backlink-excerpt">[[Le Comptoir]] accompagne depuis 1 an un grand groupe (+100 000 collaborateurs) dans sa transformation culturelle globale. La d√©marche est...</div>
        </div>
      
        <div class="backlink-box">
          <a class="internal-link" href="/un-jeu-pour-comprendre-les-syst%C3%A8mes-complexes-et-les-%C3%A9cosyst%C3%A8mes">Un jeu pour comprendre les syst√®mes complexes et les √©cosyst√®mes.</a>
          <div class="backlink-excerpt">Merci Nick, cr√©ateur de ce petit jeu, pour m‚Äôaider √† r√©pondre en partie, de mani√®re fun et plus simplement √†...</div>
        </div>
      
        <div class="backlink-box">
          <a class="internal-link" href="/alterner-entre-pens%C3%A9e-syst%C3%A9mique-et-lin%C3%A9aire">alterner entre pens√©e syst√©mique et lin√©aire</a>
          <div class="backlink-excerpt">2 des modes de pens√©e que notre cerveau peut activer aux besoins.
</div>
        </div>
      
        <div class="backlink-box">
          <a class="internal-link" href="/complexit%C3%A9">complexit√©</a>
          <div class="backlink-excerpt">Concept qui articule l‚Äô√©tude des [[syst√®me complexe]] et proche de la [[pens√©e syst√©mique]] par la [[pens√©e complexe]].
</div>
        </div>
      
        <div class="backlink-box">
          <a class="internal-link" href="/extrait-1-du-mooc-regenerative-design">extrait 1 du mooc regenerative design</a>
          <div class="backlink-excerpt">[[design r√©g√©n√©ratif]] - [[syst√®me complexe]] - [[bio-inspiration]] - 1.2-4 Regeneration (mooc chapter)
</div>
        </div>
      
        <div class="backlink-box">
          <a class="internal-link" href="/guidebook-business-as-non-usual">guidebook business as non usual</a>
          <div class="backlink-excerpt">
</div>
        </div>
      
        <div class="backlink-box">
          <a class="internal-link" href="/la-puissance-du-design-syst%C3%A9mique-par-l-exemple-des-banques">la puissance du design syst√©mique par l‚Äôexemple des banques</a>
          <div class="backlink-excerpt">The power of systems design lies in the fact that one initiative has the potential to respond to many needs...</div>
        </div>
      
        <div class="backlink-box">
          <a class="internal-link" href="/penser-global-mais-agir-local">penser global mais agir local</a>
          <div class="backlink-excerpt">intention soutenir la prise d‚Äôaction individuelle et la simplicit√© en se lib√©rant du point de vue global qui fait prendre...</div>
        </div>
      
        <div class="backlink-box">
          <a class="internal-link" href="/pens%C3%A9e-lin%C3%A9aire-pens%C3%A9e-design-et-pens%C3%A9e-syst%C3%A9mique-pour-se-compl%C3%A9ter">pens√©e lin√©aire, pens√©e design et pens√©e syst√©mique pour se compl√©ter</a>
          <div class="backlink-excerpt">intention
pas besoin d‚Äôopposer ces mod√®les de pens√©es car ils se compl√®tent pleinement

  article source

</div>
        </div>
      
        <div class="backlink-box">
          <a class="internal-link" href="/profiter-du-chaos-et-des-erreurs">profiter du chaos et des erreurs</a>
          <div class="backlink-excerpt">inspiration de cet article
</div>
        </div>
      
        <div class="backlink-box">
          <a class="internal-link" href="/woodstock-99-pour-parler-d-effondrement">woodstock 99 pour parler d'effondrement</a>
          <div class="backlink-excerpt">documentaire sur Netflix que j‚Äôinvite vraiment √† d√©couvrir. comment un festival qui devait √™tre le plus dingue du monde l‚Äôa...</div>
        </div>
      
      </div>
      
    </aside>
  </div>
</article>

<script>
// Auto-generate TOC for notes with 3+ headings
(function() {
  var content = document.querySelector('.note-content');
  var tocContainer = document.getElementById('toc-container');
  if (!content || !tocContainer) return;
  
  var headings = content.querySelectorAll('h2, h3');
  if (headings.length < 3) return;
  
  var details = document.createElement('details');
  details.className = 'toc';
  var summary = document.createElement('summary');
  summary.className = 'toc-title';
  summary.textContent = 'Sommaire';
  details.appendChild(summary);
  var ul = document.createElement('ul');
  
  headings.forEach(function(h, i) {
    if (!h.id) h.id = 'heading-' + i;
    var li = document.createElement('li');
    if (h.tagName === 'H3') li.className = 'toc-h3';
    var a = document.createElement('a');
    a.href = '#' + h.id;
    a.textContent = h.textContent;
    li.appendChild(a);
    ul.appendChild(li);
  });
  
  details.appendChild(ul);
  tocContainer.appendChild(details);
})();
</script>
</main>
      <footer class="site-footer">
	<nav class="footer-nav" aria-label="Navigation de pied de page">
		<a href="/">Accueil</a>
		<a href="/search">Rechercher</a>
		<a href="/about">√Ä propos</a>
		<a href="/graph">Graph</a>
		<a href="/feed.xml" aria-label="Flux RSS">RSS</a>
	</nav>
	<p>Ce <a href="/about">jardin num√©rique</a> est un espace vivant, en constante √©volution.</p>
	<p>¬© 2026 Jardin Liut.</p>
</footer>

    </div>

    <div class="tooltip-wrapper" id="tooltip-wrapper">
  <div id="tooltip-content"></div>
</div>

<script>
(function() {
  var opacityTimeout, contentTimeout;
  var transitionDurationMs = 100;
  var tooltipWrapper = document.getElementById('tooltip-wrapper');
  var tooltipContent = document.getElementById('tooltip-content');
  var cache = {};

  function hideTooltip() {
    opacityTimeout = setTimeout(function() {
      tooltipWrapper.style.opacity = 0;
      contentTimeout = setTimeout(function() {
        tooltipContent.innerHTML = '';
        tooltipWrapper.style.display = 'none';
      }, transitionDurationMs + 1);
    }, transitionDurationMs);
  }

  function showTooltip(event) {
    var elem = event.target;
    var rects = elem.getClientRects();
    var elemProps = rects[rects.length - 1];
    var scrollTop = window.pageYOffset || document.documentElement.scrollTop;

    if (elem.host !== window.location.host) return;

    function renderTooltip(html) {
      tooltipContent.innerHTML = html;
      tooltipWrapper.style.display = 'block';
      setTimeout(function() { tooltipWrapper.style.opacity = 1; }, 1);

      tooltipWrapper.style.left = (elemProps.left - (tooltipWrapper.offsetWidth / 2) + (elemProps.width / 2)) + 'px';
      if ((window.innerHeight - elemProps.top) < tooltipWrapper.offsetHeight) {
        tooltipWrapper.style.top = (elemProps.top + scrollTop - tooltipWrapper.offsetHeight - 10) + 'px';
      } else {
        tooltipWrapper.style.top = (elemProps.top + scrollTop + 35) + 'px';
      }
      if ((elemProps.left + elemProps.width / 2) < (tooltipWrapper.offsetWidth / 2)) {
        tooltipWrapper.style.left = '10px';
      } else if ((document.body.clientWidth - elemProps.left - elemProps.width / 2) < (tooltipWrapper.offsetWidth / 2)) {
        tooltipWrapper.style.left = (document.body.clientWidth - tooltipWrapper.offsetWidth - 20) + 'px';
      }
    }

    if (cache[elem.href]) {
      renderTooltip(cache[elem.href]);
      return;
    }

    fetch(elem.href)
      .then(function(r) { return r.text(); })
      .then(function(html) {
        var parser = new DOMParser();
        var doc = parser.parseFromString(html, 'text/html');
        var h1 = doc.querySelector('h1');
        var content = doc.querySelector('.note-content');
        if (!h1 || !content) return;
        var preview = '<div class="tooltip-title">' + h1.textContent + '</div>' + content.innerHTML;
        cache[elem.href] = preview;
        renderTooltip(preview);
      })
      .catch(function() {});
  }

  function setupListeners(link) {
    link.addEventListener('mouseleave', hideTooltip);
    link.addEventListener('touchend', hideTooltip);
    link.addEventListener('mouseenter', function(e) {
      clearTimeout(opacityTimeout);
      clearTimeout(contentTimeout);
      showTooltip(e);
    });
  }

  tooltipWrapper.addEventListener('mouseleave', hideTooltip);
  tooltipWrapper.addEventListener('touchend', hideTooltip);
  tooltipWrapper.addEventListener('mouseenter', function() {
    clearTimeout(opacityTimeout);
    clearTimeout(contentTimeout);
  });

  document.querySelectorAll('.note-content a').forEach(setupListeners);
})();
</script>


    <script>
    // Theme toggle: cycles auto ‚Üí dark ‚Üí light ‚Üí auto
    (function() {
      var root = document.documentElement;
      var btn = document.getElementById('theme-toggle');
      var icon = document.getElementById('theme-icon');
      if (!btn || !icon) return;

      var saved = localStorage.getItem('theme');
      if (saved === 'dark' || saved === 'light') {
        root.setAttribute('data-theme', saved);
      }
      updateIcon();

      btn.addEventListener('click', function() {
        var current = root.getAttribute('data-theme');
        if (!current) {
          // Was auto (OS) ‚Üí force dark
          root.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
        } else if (current === 'dark') {
          root.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
        } else {
          // Was light ‚Üí back to auto
          root.removeAttribute('data-theme');
          localStorage.removeItem('theme');
        }
        updateIcon();
      });

      function updateIcon() {
        var theme = root.getAttribute('data-theme');
        if (theme === 'dark') {
          icon.textContent = '‚òÄÔ∏è';
        } else if (theme === 'light') {
          icon.textContent = 'üåô';
        } else {
          // Auto ‚Äî show based on OS
          icon.textContent = window.matchMedia('(prefers-color-scheme: dark)').matches ? '‚òÄÔ∏è' : 'üåô';
        }
      }
    })();
    </script>
  </body>
</html>
